define("ace/mode/dynamo_wfl",["require","exports","module","pilot/oop","ace/mode/text","ace/tokenizer","ace/mode/dynamo_wfl_highlight_rules","ace/range","ace/worker/worker_client"],function(a,b,c){console.log("skk: dynamo_wfl.js in use");var d=a("pilot/oop"),e=a("ace/mode/text").Mode,f=a("ace/tokenizer").Tokenizer,g=a("ace/mode/dynamo_wfl_highlight_rules").dynamo_wflHighlightRules,h=a("ace/range").Range,i=a("ace/worker/worker_client").WorkerClient,j=function(){this.$tokenizer=new f((new g).getRules())};d.inherits(j,e),function(){this.toggleCommentLines=function(a,b,c,d){var e=!0,f=[],g=/^(\s*)\/\//;for(var i=c;i<=d;i++)if(!g.test(b.getLine(i))){e=!1;break}if(e){var j=new h(0,0,0,0);for(var i=c;i<=d;i++){var k=b.getLine(i),l=k.match(g);j.start.row=i,j.end.row=i,j.end.column=l[0].length,b.replace(j,l[1])}}else b.indentRows(c,d,"//")},this.getNextLineIndent=function(a,b,c){var d=this.$getIndent(b),e=this.$tokenizer.getLineTokens(b,a),f=e.tokens,g=e.state;if(f.length&&f[f.length-1].type=="comment")return d;if(a=="start"){var h=b.match(/^.*[\{\(\[]\s*$/);h&&(d+=c)}else if(a=="doc-start"){if(g=="start")return"";var h=b.match(/^\s*(\/?)\*/);h&&(h[1]&&(d+=" "),d+="* ")}return d},this.checkOutdent=function(a,b,c){},this.autoOutdent=function(a,b,c){},this.createWorker=function(a){var b=a.getDocument(),c=new i(["ace","pilot"],"worker-dynamo_wfl.js","ace/mode/dynamo_wfl_worker","DynamoWorkflowDefinitionWorker");return c.call("setValue",[b.getValue()]),b.on("change",function(a){a.range={start:a.data.range.start,end:a.data.range.end},c.emit("change",a)}),c.on("issues",function(b){a.setAnnotations(b.data)}),c.on("noissues",function(b){a.clearAnnotations()}),c.on("terminate",function(){a.clearAnnotations()}),c}}.call(j.prototype),b.Mode=j}),define("ace/mode/dynamo_wfl_highlight_rules",["require","exports","module","pilot/oop","pilot/lang","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules","ace/mode/dynamo_wfl_parser"],function(a,b,c){var d=a("pilot/oop"),e=a("pilot/lang"),f=a("ace/mode/doc_comment_highlight_rules").DocCommentHighlightRules,g=a("ace/mode/text_highlight_rules").TextHighlightRules,h=a("ace/mode/dynamo_wfl_parser").logic,i=function(){var a=e.arrayToMap("".split("|")),b="aggregate|avg|concat|context|create|dateadd|delete|email|exec|execsl|fetch|fetchimap|fetchpop3|fetchrelated|filter|formula|gen|ifnoresult|iphonepush|limit|nop|notin|report|regex|scope|search|select|sendim|sequence|sum|trace|trigger|union",c=e.arrayToMap(b.split("|"));this.$rules={start:[{token:"comment",regex:"^\\/\\/.*$"},{token:"invalid",regex:"^[^\\/].*\\/\\/.*$"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:function(a,b,d){var e="invalid";return d=d.match(/\s*.+\s*/),c.hasOwnProperty(d)&&(e="keyword"),["identifier","keyword.operator",e]},regex:"^(\\S.+)(:\\s*)(.+)$"},{token:function(a,b,c){var d="identifier",e="identifier";if(window.DynamoGlobal&&window.DynamoGlobal.parsed){var f=window.DynamoGlobal.parsed,g=window.DynamoGlobal.Edl;if(!f[a])d="invalid";else if(g){var h=f[a].Entity;if(h){var i=g[h];i&&(i[c]||(e="invalid"))}}console.log(JSON.stringify(window.DynamoGlobal.parsed))}return[d,"keyword.operator",e]},regex:"([^\\s.]+)(\\s*\\.\\s*)(.*)$"},{token:"keyword.operator",regex:"<=|<-|:"},{token:"identifier",regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b(?=\\s*:)"},{token:"invalid.illegal",regex:"^[a-zA-Z_$][a-zA-Z0-9_$]*(?=\\s*(<-|<=))"},{token:"invalid.illegal",regex:"\\s+[a-zA-Z_$][a-zA-Z0-9_$]*\\b(?=\\s*:)"},{token:function(b){return a.hasOwnProperty(b)?"keyword":c.hasOwnProperty(b)?"keyword":"identifier"},regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"}]}};d.inherits(i,g),b.dynamo_wflHighlightRules=i}),define("ace/mode/doc_comment_highlight_rules",["require","exports","module","pilot/oop","ace/mode/text_highlight_rules"],function(a,b,c){var d=a("pilot/oop"),e=a("ace/mode/text_highlight_rules").TextHighlightRules,f=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},{token:"comment.doc",merge:!0,regex:"\\s+"},{token:"comment.doc",merge:!0,regex:"TODO"},{token:"comment.doc",merge:!0,regex:"[^@\\*]+"},{token:"comment.doc",merge:!0,regex:"."}]}};d.inherits(f,e),function(){this.getStartRule=function(a){return{token:"comment.doc",merge:!0,regex:"\\/\\*(?=\\*)",next:a}},this.getEndRule=function(a){return{token:"comment.doc",merge:!0,regex:"\\*\\/",next:a}}}.call(f.prototype),b.DocCommentHighlightRules=f}),define("ace/mode/dynamo_wfl_parser",["require","exports","module"],function(a,b,c){var d=b.logic=function(){var a={trace:function(){},yy:{},symbols_:{error:2,all:3,program:4,EOF:5,operation:6,item_definition:7,item_links:8,SCOPE_ITEM_NAME:9,DEF_ITEM_NAME:10,ITEM_TYPE:11,link:12,IN_ARG:13,A_LINK:14,value:15,PT_LINK:16,CONST:17,REF_ITEM_NAME:18,OUT_ARG:19,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",9:"SCOPE_ITEM_NAME",10:"DEF_ITEM_NAME",11:"ITEM_TYPE",13:"IN_ARG",14:"A_LINK",16:"PT_LINK",17:"CONST",18:"REF_ITEM_NAME",19:"OUT_ARG"},productions_:[0,[3,2],[4,0],[4,2],[6,2],[7,3],[7,2],[7,2],[7,1],[8,0],[8,2],[12,3],[12,3],[12,2],[12,2],[15,1],[15,2]],performAction:function(a,b,c,d,e,f,g){var h=f.length-1;switch(e){case 1:return f[h-1];case 2:this.$={};break;case 3:this.$=f[h-1],this.$[f[h].name]=f[h].item;break;case 4:var i=f[h-1],j=f[h],k={name:i.name,item:{}};i.__type&&(k.item.__type=i.__type);var l=0;for(var m=0;m<j.length;m++){var n=j[m];n.name==="_"&&(n.name="_"+l++),n.type==="a"?n.value.type==="const"?k.item[n.name]=n.value.value:k.item[n.name]={type:"link",name:n.value.name,arg:n.value.arg}:n.value.type==="const"?k.item[n.name]={type:"ptvalue",value:n.value.value}:k.item[n.name]={type:"ptlink",name:n.value.name,arg:n.value.arg}}this.$=k;break;case 5:this.$={name:f[h-1],__type:f[h]};break;case 6:this.$={name:f[h]};break;case 7:this.$={name:f[h-1],__type:f[h]};break;case 8:this.$={name:f[h]};break;case 9:this.$=[];break;case 10:this.$=f[h-1],this.$.push(f[h]);break;case 11:this.$={type:"a",name:f[h-2],value:f[h]};break;case 12:this.$={type:"pt",name:f[h-2],value:f[h]};break;case 13:this.$={type:"a",name:"_",value:f[h]};break;case 14:this.$={type:"pt",name:"_",value:f[h]};break;case 15:this.$={type:"const",value:f[h].substr(1).replace(/('|")\s*/ig,"")};break;case 16:this.$={type:"ref",name:f[h-1].substr(0,f[h-1].length-1),arg:f[h]}}},table:[{3:1,4:2,5:[2,2],9:[2,2],10:[2,2]},{1:[3]},{5:[1,3],6:4,7:5,9:[1,6],10:[1,7]},{1:[2,1]},{5:[2,3],9:[2,3],10:[2,3]},{5:[2,9],8:8,9:[2,9],10:[2,9],13:[2,9],14:[2,9],16:[2,9]},{10:[1,9]},{5:[2,8],9:[2,8],10:[2,8],11:[1,10],13:[2,8],14:[2,8],16:[2,8]},{5:[2,4],9:[2,4],10:[2,4],12:11,13:[1,12],14:[1,13],16:[1,14]},{5:[2,6],9:[2,6],10:[2,6],11:[1,15],13:[2,6],14:[2,6],16:[2,6]},{5:[2,7],9:[2,7],10:[2,7],13:[2,7],14:[2,7],16:[2,7]},{5:[2,10],9:[2,10],10:[2,10],13:[2,10],14:[2,10],16:[2,10]},{14:[1,16],16:[1,17]},{15:18,17:[1,19],18:[1,20]},{15:21,17:[1,19],18:[1,20]},{5:[2,5],9:[2,5],10:[2,5],13:[2,5],14:[2,5],16:[2,5]},{15:22,17:[1,19],18:[1,20]},{15:23,17:[1,19],18:[1,20]},{5:[2,13],9:[2,13],10:[2,13],13:[2,13],14:[2,13],16:[2,13]},{5:[2,15],9:[2,15],10:[2,15],13:[2,15],14:[2,15],16:[2,15]},{19:[1,24]},{5:[2,14],9:[2,14],10:[2,14],13:[2,14],14:[2,14],16:[2,14]},{5:[2,11],9:[2,11],10:[2,11],13:[2,11],14:[2,11],16:[2,11]},{5:[2,12],9:[2,12],10:[2,12],13:[2,12],14:[2,12],16:[2,12]},{5:[2,16],9:[2,16],10:[2,16],13:[2,16],14:[2,16],16:[2,16]}],defaultActions:{3:[2,1]},parseError:function(a,b){throw new Error(a)},parse:function f(a){function n(a){c.length=c.length-2*a,d.length=d.length-a,e.length=e.length-a}function o(){var a;return a=b.lexer.lex()||1,typeof a!="number"&&(a=b.symbols_[a]||a),a}var b=this,c=[0],d=[null],e=[],f=this.table,g="",h=0,i=0,j=0,k=2,l=1;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var m=this.lexer.yylloc;e.push(m),typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var p,q,r,s,t,u,v={},w,x,y,z;for(;;){r=c[c.length-1],this.defaultActions[r]?s=this.defaultActions[r]:(p==null&&(p=o()),s=f[r]&&f[r][p]);if(typeof s=="undefined"||!s.length||!s[0]){if(!j){z=[];for(w in f[r])this.terminals_[w]&&w>2&&z.push("'"+this.terminals_[w]+"'");var A="";this.lexer.showPosition?A="Parse error on line "+(h+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+z.join(", "):A="Parse error on line "+(h+1)+": Unexpected "+(p==1?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(A,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:m,expected:z})}if(j==3){if(p==l)throw new Error(A||"Parsing halted.");i=this.lexer.yyleng,g=this.lexer.yytext,h=this.lexer.yylineno,m=this.lexer.yylloc,p=o()}for(;;){if(k.toString()in f[r])break;if(r==0)throw new Error(A||"Parsing halted.");n(1),r=c[c.length-1]}q=p,p=k,r=c[c.length-1],s=f[r]&&f[r][k],j=3}if(s[0]instanceof Array&&s.length>1)throw new Error("Parse Error: multiple actions possible at state: "+r+", token: "+p);switch(s[0]){case 1:c.push(p),d.push(this.lexer.yytext),e.push(this.lexer.yylloc),c.push(s[1]),p=null,q?(p=q,q=null):(i=this.lexer.yyleng,g=this.lexer.yytext,h=this.lexer.yylineno,m=this.lexer.yylloc,j>0&&j--);break;case 2:x=this.productions_[s[1]][1],v.$=d[d.length-x],v._$={first_line:e[e.length-(x||1)].first_line,last_line:e[e.length-1].last_line,first_column:e[e.length-(x||1)].first_column,last_column:e[e.length-1].last_column},u=this.performAction.call(v,g,i,h,this.yy,s[1],d,e);if(typeof u!="undefined")return u;x&&(c=c.slice(0,-1*x*2),d=d.slice(0,-1*x),e=e.slice(0,-1*x)),c.push(this.productions_[s[1]][0]),d.push(v.$),e.push(v._$),y=f[c[c.length-2]][c[c.length-1]],c.push(y);break;case 3:return!0}}return!0}},b=function(){var a={EOF:1,parseError:function b(a,b){if(this.yy.parseError)this.yy.parseError(a,b);else throw new Error(a)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.match+=a,this.matched+=a;var b=a.match(/\n/);return b&&this.yylineno++,this._input=this._input.slice(1),a},unput:function(a){return this._input=a+this._input,this},more:function(){return this._more=!0,this},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=(new Array(a.length+1)).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d;this._more||(this.yytext="",this.match="");var e=this._currentRules();for(var f=0;f<e.length;f++){b=this._input.match(this.rules[e[f]]);if(b){d=b[0].match(/\n.*/g),d&&(this.yylineno+=d.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:d?d[d.length-1].length-1:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,e[f],this.conditionStack[this.conditionStack.length-1]);if(a)return a;return}}if(this._input==="")return this.EOF;this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return typeof a!="undefined"?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules}};return a.performAction=function(a,b,c,d){var e=d;switch(c){case 0:break;case 1:this.begin("S_LINK");break;case 2:this.begin("S_DEF");break;case 3:break;case 4:return 5;case 5:return 9;case 6:return this.begin("S_TYPE"),10;case 7:return this.begin("INITIAL"),10;case 8:break;case 9:return this.begin("INITIAL"),11;case 10:return this.begin("S_VALUE"),14;case 11:return this.begin("S_VALUE"),16;case 12:return 13;case 13:return this.begin("INITIAL"),"INVALID";case 14:return this.begin("INITIAL"),17;case 15:return this.begin("INITIAL"),17;case 16:return this.begin("S_OUTARG"),18;case 17:return this.begin("INITIAL"),"INVALID";case 18:break;case 19:return this.begin("INITIAL"),19}},a.rules=[/^>\s*\/\/.*/,/^>\s+/,/^>/,/^\s+/,/^$/,/^\[.*\]/,/^.*(?=:)/,/^.*/,/^:/,/^.*/,/^\s*<-\s*/,/^\s*<=\s*/,/^.*?(?=(\s*(<-|<=)))/,/^.*/,/^'.*'\s*/,/^".*"\s*/,/^.*?\./,/^.*/,/^\./,/^.*/],a.conditions={S_TYPE:{rules:[0,1,2,3,4,8,9],inclusive:!0},S_OUTARG:{rules:[0,1,2,3,4,18,19],inclusive:!0},S_VALUE:{rules:[0,1,2,3,4,14,15,16,17],inclusive:!0},S_LINK:{rules:[0,1,2,3,4,10,11,12,13],inclusive:!0},S_DEF:{rules:[0,1,2,3,4,5,6,7],inclusive:!0},INITIAL:{rules:[0,1,2,3,4],inclusive:!0}},a}();return a.lexer=b,a}()}),define("ace/worker/worker_client",["require","exports","module","pilot/oop","pilot/event_emitter"],function(a,b,c){var d=a("pilot/oop"),e=a("pilot/event_emitter").EventEmitter,f=function(b,c,d,e){this.changeListener=this.changeListener.bind(this);if(a.packaged)var f=this.$guessBasePath(),g=this.$worker=new Worker(f+c);else{var h=this.$normalizePath(a.nameToUrl("ace/worker/worker",null,"_")),g=this.$worker=new Worker(h),i={};for(var j=0;j<b.length;j++){var k=b[j],l=this.$normalizePath(a.nameToUrl(k,null,"_").replace(/.js$/,""));i[k]=l}}this.$worker.postMessage({init:!0,tlns:i,module:d,classname:e}),this.callbackId=1,this.callbacks={};var m=this;this.$worker.onerror=function(a){throw window.console&&console.log&&console.log(a),a},this.$worker.onmessage=function(a){var b=a.data;switch(b.type){case"log":window.console&&console.log&&console.log(b.data);break;case"event":m._dispatchEvent(b.name,{data:b.data});break;case"call":var c=m.callbacks[b.id];c&&(c(b.data),delete m.callbacks[b.id])}}};((function(){d.implement(this,e),this.$normalizePath=function(a){return a.match(/^\w+:/)||(a=location.protocol+"//"+location.host+(a.charAt(0)=="/"?"":location.pathname.replace(/\/[^\/]*$/,""))+"/"+a.replace(/^[\/]+/,"")),a},this.$guessBasePath=function(){if(a.aceBaseUrl)return a.aceBaseUrl;var b=document.getElementsByTagName("script");for(var c=0;c<b.length;c++){var d=b[c],e=d.getAttribute("data-ace-base");if(e)return e.replace(/\/*$/,"/");var f=d.src||d.getAttribute("src");if(!f)continue;var g=f.match(/^(?:(.*\/)ace\.js|(.*\/)ace-uncompressed\.js)(?:\?|$)/);if(g)return g[1]||g[2]}return""},this.terminate=function(){this._dispatchEvent("terminate",{}),this.$worker.terminate(),this.$worker=null,this.$doc.removeEventListener("change",this.changeListener),this.$doc=null},this.send=function(a,b){this.$worker.postMessage({command:a,args:b})},this.call=function(a,b,c){if(c){var d=this.callbackId++;this.callbacks[d]=c,b.push(d)}this.send(a,b)},this.emit=function(a,b){try{this.$worker.postMessage({event:a,data:{data:b.data}})}catch(c){}},this.attachToDocument=function(a){this.$doc&&this.terminate(),this.$doc=a,this.call("setValue",[a.getValue()]),a.on("change",this.changeListener)},this.changeListener=function(a){a.range={start:a.data.range.start,end:a.data.range.end},this.emit("change",a)}})).call(f.prototype),b.WorkerClient=f})